# Sockets_With_C
An assignment with C programming language for Linux environment based on understanding the sockets.

# Εκφώνηση 

Υποθέτουμε πως έχουμε στη διάθεσή μας 3 εξυπηρετητές και 20 πελάτες. Οι 2 εξυπηρετητές έχουν στη διάθεσή τους δεδομένα με τη μορφή διανυσμάτων (π.χ., 1000 διανύσματα).Ο τελευταίος εξυπηρετητής αναλαμβάνει να λειτουργήσει ως ενδιάμεσος μεταξύ των πελατών και των δύο εξυπηρετητών. Ανά τακτά διαστήματα οι δύο εξυπηρετητές ενημερώνουν τον τρίτο για το μέσο όρο και τη διακύμανση των δεδομένων (της κάθε διάστασης). Ο καθένας από αυτούς στέλνει δύο διανύσματα, ένα με τους μέσους όρους και ένα με τη διακύμανση. Για παράδειγμα θεωρείστε τα ακόλουθα διανύσματα: , . Συνεπώς, ο ‘ενδιάμεσος’ εξυπηρετητής έχει στη διάθεσή του τέσσερα διανύσματα. Οι πελάτες παράγουν τιμές-διανύσματα τα οποία θέλουν να τοποθετήσουν στο σωστό εξυπηρετητή. Για να το κάνουν αυτό θα πρέπει να συμβουλευτούν τον ενδιάμεσο εξυπηρετητή. Συνεπώς, κάθε φορά που παράγουν ένα διάνυσμα, στέλνουν ένα μήνυμα με τα δεδομένα τους στον ενδιάμεσο και αυτός τους αποκρίνεται με το ποιος από τους δύο άλλους εξυπηρετητές είναι ο κατάλληλος για να αποθηκεύσει τα δεδομένα. Η απόφαση λαμβάνεται με τη βοήθεια της ομοιότητας των δεδομένων με τα διανύσματα των μέσων όρων και των διακυμάνσεων. Ο ενδιάμεσος θα εφαρμόσει μια Ευκλείδεια απόσταση με τους μέσους όρους και θα βρει ποια απόσταση είναι η μικρότερη. Στη συνέχεια, θα υπολογίσει το μέσο όρο όλων των διακυμάνσεων. Ο καταλληλότερος προς αποθήκευση εξυπηρετητής είναι αυτός με τη μικρότερη απόσταση εκτός και αν η μέση τιμή των διακυμάνσεων υπερβαίνει ένα προκαθορισμένο όριο. Ο ενδιάμεσος αφού βρει τον καταλληλότερο εξυπηρετητή, θα αποστείλει κατάλληλο μήνυμα προς τον πελάτη και αυτός στη συνέχεια θα προωθήσει τα δεδομένα προς τον επιλεγμένο εξυπηρετητή. Ο εξυπηρετητής μετά την αποθήκευση στέλνει μήνυμα αποδοχής προς τον πελάτη ώστε να κλείσει η επικοινωνία. Να προσομοιώσετε το παραπάνω σενάριο με τη βοήθεια των sockets καθώς και ότι άλλο κρίνετε ότι είναι χρήσιμο για την υλοποίηση.

**Σημείωση: Η υλοποίηση της άσκησης δεν έχει πραγματοποιηθεί στο 100%. π.χ. η διαδικασία για την διακύμανση δεν έχει υλοποιηθεί σωστά.**

# Αρχεία εργασίας και περιγραφή

Τα κύρια αρχεία τις εργασίας είναι τέσσερα:
*	Main Server 
*	Server A
*	Server B
*	Client

Κατά την εκτέλεση αυτών των αρχείων θα δημιουργηθούν κάποια .txt αρχεία. Επάρχουν σε comments κάποιες  printf εντολές για να βοηθησουν τον χρήστη έτσι ώστε να τυπώσεις ανά διαστήματα δεδομένα για να καταλάβει καλύτερα τι γίνεται σε διάφορεσ χρονικές στιγμές. 

Ο κώδικας αυτό που κάνει είναι :

* Ο πελάτης δημιουργεί array με τυχαίο μέγεθος και περιέχει τυχαίους αριθμούς. Αυτό το array είναι το διάνυσμα μας το οποίο στέλνετε στον main server. Όταν πάρει απάντηση από τον main server μέσω μια function συνδέετε στον κατάλληλο server στέλνοντας του το ίδιο array. 

* Ο main server δέχεται το array  υπολογίζει την ευκλείδεια απόσταση και το  μέσο όρο των διακυμάνσεων( Με τον μέσο όρο των διακυμάνσεων δεν κάνω κάποιο υπολογισμό). Αφού βρεθεί η ευκλείδεια απόσταση ανάλογα με τα αποτελέσματα στέλνεται μήνυμα στον πελάτη . 

* Ο serverA-B δέχεται ένα array και το καταχωρεί σε ένα αρχείο (μαζί με τα άλλα διανύσματα, κάθε γραμμή και ένα διάνυσμα) αφού το καταχωρίσει υπολογίζει το μέσω όρο και την διακύμανση  γραμμή –γραμμή, έπειτα αποθηκεύει τα αποτελέσματα σε αρχεία. 

 
#	Βήματα εκτέλεσης

Τα βήματα εκτέλεσης των αρχείων είναι τα εξής:
1.	Πρώτα κάνουμε compile τα αρχεία μας με τις εντολές
```bash
gcc {όνομα αρχείου}.c  -o {όνομα μεταγλωττισμένου αρχείου} –lm
```
παράδειγμα :
```bash
	gcc MainServer.c –o mainserver –lm  
```
το –lm χρειάζεται μόνο όταν κάνεις compile τους servers.

2.	Επόμενο βήμα είναι να τρέξεις τα αρχεία. Πρώτα τους Servers και μετά τον client 
Με την εντολή 
```bash
./{όνομα μεταγλωττισμένου αρχείου}
```
Παράδειγμα :
```bash
	./mainserver 
```
3.	Για να πάνε  όλα καλά πρέπει να υπάρχουν τα txt αρχεία *AvgFromServerA* και *AvgFromServerB*. Με κάποιο υποτιθέμενο μέσο όρο και τα txt αρχεία *FileA* και *FileB* όπου αποθηκεύονται τα διανύσματα. 
4.	Οπότε βάζεις τους servers να τρέχουν και απλά εκτελείς τον client όσες φορές θέλεις.
 
# Notes && Links

<<<<<<< HEAD
*  	Online calculator για την διακύμανση πολύ βοηθητικό. 
=======
*  	Online calculator πολύ βοηθητικό. 
>>>>>>> f295175c58d18c5c0eda15907b1d2d15273d4edb
*	[Διακύμανση](https://el.wikipedia.org/wiki/%CE%A3%CF%85%CE%BD%CE%AE%CE%B8%CE%B7%CF%82_%CE%B1%CF%80%CF%8C%CE%BA%CE%BB%CE%B9%CF%83%CE%B7#%CE%92%CE%B1%CF%83%CE%B9%CE%BA%CE%AC_%CF%80%CE%B1%CF%81%CE%B1%CE%B4%CE%B5%CE%AF%CE%B3%CE%BC%CE%B1%CF%84%CE%B1) Θεωρία (fluctuation). 
*	[Ευκλείδεια απόσταση](https://el.wikipedia.org/wiki/%CE%95%CF%85%CE%BA%CE%BB%CE%B5%CE%AF%CE%B4%CE%B5%CE%B9%CE%B1_%CE%BC%CE%B5%CF%84%CF%81%CE%B9%CE%BA%CE%AE#%CE%9C%CE%AF%CE%B1_%CE%B4%CE%B9%CE%AC%CF%83%CF%84%CE%B1%CF%83%CE%B7) για μια διάσταση. 
*	Ευκλείδεια απόσταση [παράδειγμα](http://mathonline.wikidot.com/the-distance-between-two-vectors).
 
*	[Pow](https://www.tutorialspoint.com/c_standard_library/c_function_pow.htm) , [Sqrt](https://www.tutorialspoint.com/c_standard_library/c_function_sqrt.htm), [Fabs](https://www.tutorialspoint.com/c_standard_library/c_function_fabs.htm) , [htonl](https://linux.die.net/man/3/htonl).

